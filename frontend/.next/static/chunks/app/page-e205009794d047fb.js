(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3263:function(t,e,n){Promise.resolve().then(n.bind(n,8212))},8212:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return i}});var o=n(7437),a=n(2265),s=n(6463),c=n(1270);function i(){let{token:t,isLoading:e}=(0,c.a)(),n=(0,s.useRouter)();return(0,a.useEffect)(()=>{e||(t?n.push("/dashboard"):n.push("/login"))},[t,e,n]),(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})})}},1270:function(t,e,n){"use strict";n.d(e,{H:function(){return r},a:function(){return l}});var o=n(7437),a=n(2265),s=n(6463),c=n(2800);let i=(0,a.createContext)(void 0);function r(t){let{children:e}=t,[n,r]=(0,a.useState)(null),[l,u]=(0,a.useState)(null),[d,p]=(0,a.useState)(!0),g=(0,s.useRouter)();(0,s.usePathname)(),(0,a.useEffect)(()=>{(async()=>{let t=localStorage.getItem("token");if(t){u(t);try{let t=await c.iJ.getMe();r(t.data)}catch(t){console.error("Session restoration failed",t),localStorage.removeItem("token"),u(null)}}p(!1)})()},[]);let m=async t=>{localStorage.setItem("token",t),u(t);try{let t=await c.iJ.getMe();r(t.data),g.push("/dashboard")}catch(t){console.error("Failed to fetch user after login",t),g.push("/login")}};return(0,o.jsx)(i.Provider,{value:{user:n,token:l,login:m,logout:()=>{localStorage.removeItem("token"),u(null),r(null),g.push("/login")},isLoading:d},children:e})}let l=()=>{let t=(0,a.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},2800:function(t,e,n){"use strict";n.d(e,{gr:function(){return a},iJ:function(){return i},r:function(){return c},yN:function(){return s}});let o=n(8472).Z.create({baseURL:"http://localhost:8000/api/v1"});o.interceptors.request.use(t=>{let e=localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),o.interceptors.response.use(t=>t,t=>(t.response&&401===t.response.status&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(t)));let a={getAll:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keyword";return o.get("/notes/",{params:{search:t,mode:e}})},getById:t=>o.get("/notes/".concat(t)),create:t=>o.post("/notes/structure",t),generateSoap:t=>o.post("/notes/".concat(t,"/generate")),update:(t,e)=>o.put("/notes/".concat(t),e),delete:t=>o.delete("/notes/".concat(t)),getAudit:t=>o.get("/notes/".concat(t,"/audit")),getHistory:t=>o.get("/notes/".concat(t,"/history"))},s={getAll:t=>o.get("/patients/",{params:{search:t}}),getById:t=>o.get("/patients/".concat(t)),getTimeline:t=>o.get("/patients/".concat(t,"/timeline")),create:t=>o.post("/patients/",t),update:(t,e)=>o.patch("/patients/".concat(t),e),getReport:t=>o.get("/patients/".concat(t,"/report")),downloadReportPdf:t=>o.get("/patients/".concat(t,"/report/pdf"),{responseType:"blob"}),toggleStatus:(t,e)=>o.patch("/patients/".concat(t),{status:e})},c={getHistory:t=>o.get("/patients/".concat(t,"/history")),addHistory:(t,e)=>o.post("/patients/".concat(t,"/history"),e),updateHistory:(t,e)=>o.put("/patients/history/".concat(t),e),deleteHistory:t=>o.delete("/patients/history/".concat(t)),getMedications:t=>o.get("/patients/".concat(t,"/medications")),addMedication:(t,e)=>o.post("/patients/".concat(t,"/medications"),e),updateMedication:(t,e)=>o.put("/patients/medications/".concat(t),e),deleteMedication:t=>o.delete("/patients/medications/".concat(t)),addAllergy:(t,e)=>o.post("/patients/".concat(t,"/allergies"),e),updateAllergy:(t,e)=>o.put("/patients/allergies/".concat(t),e),deleteAllergy:t=>o.delete("/patients/allergies/".concat(t)),getAdmissions:t=>o.get("/patients/".concat(t,"/admissions")),addAdmission:(t,e)=>o.post("/patients/".concat(t,"/admissions"),e),updateAdmission:(t,e)=>o.put("/patients/admissions/".concat(t),e),deleteAdmission:t=>o.delete("/patients/admissions/".concat(t)),getProcedures:t=>o.get("/patients/".concat(t,"/procedures")),addProcedure:(t,e)=>o.post("/patients/".concat(t,"/procedures"),e),updateProcedure:(t,e)=>o.put("/patients/procedures/".concat(t),e),deleteProcedure:t=>o.delete("/patients/procedures/".concat(t)),getDocuments:t=>o.get("/patients/".concat(t,"/documents")),uploadDocument:(t,e)=>o.post("/patients/".concat(t,"/documents/upload"),e,{headers:{"Content-Type":"multipart/form-data"}}),addDocument:(t,e)=>o.post("/patients/".concat(t,"/documents"),e),updateDocument:(t,e)=>o.put("/patients/documents/".concat(t),e),deleteDocument:t=>o.delete("/patients/documents/".concat(t)),getTasks:t=>o.get("/patients/".concat(t,"/tasks")),addTask:(t,e)=>o.post("/patients/".concat(t,"/tasks"),e),updateTask:(t,e)=>o.put("/patients/tasks/".concat(t),e),deleteTask:t=>o.delete("/patients/tasks/".concat(t)),getBilling:t=>o.get("/patients/".concat(t,"/billing")),addBilling:(t,e)=>o.post("/patients/".concat(t,"/billing"),e),updateBilling:(t,e)=>o.put("/patients/billing/".concat(t),e),deleteBilling:t=>o.delete("/patients/billing/".concat(t))},i={login:t=>o.post("/auth/login",t),register:t=>o.post("/auth/register",t),getMe:()=>o.get("/auth/me")}}},function(t){t.O(0,[236,971,23,744],function(){return t(t.s=3263)}),_N_E=t.O()}]);