(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{6685:function(e,t,s){Promise.resolve().then(s.bind(s,845))},518:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6780:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2023:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},1568:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},2513:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},500:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6127:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2022:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},845:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var a=s(7437),l=s(2265),n=s(6463),i=s(7138),r=s(2800),d=s(4697);function o(e){let{isOpen:t,onClose:s,title:n,children:i}=e,r=(0,l.useRef)(null);return((0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,s]),t)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,a.jsxs)("div",{ref:r,className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",role:"dialog","aria-modal":"true",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:n}),(0,a.jsx)("button",{onClick:s,className:"text-slate-400 hover:text-slate-600 transition-colors rounded-full p-1 hover:bg-slate-100",children:(0,a.jsx)(d.Z,{size:20})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:i})]})}):null}var c=s(9764);function x(e){let{initialData:t,notes:s=[],onSubmit:n,onCancel:i}=e,[r,d]=(0,l.useState)(!1),[o,c]=(0,l.useState)({name:(null==t?void 0:t.name)||"",dosage:(null==t?void 0:t.dosage)||"",frequency:(null==t?void 0:t.frequency)||"",status:(null==t?void 0:t.status)||"Active",start_date:(null==t?void 0:t.start_date)?new Date(t.start_date).toISOString().split("T")[0]:"",end_date:(null==t?void 0:t.end_date)?new Date(t.end_date).toISOString().split("T")[0]:"",source_note_id:(null==t?void 0:t.source_note_id)||""}),x=async e=>{e.preventDefault(),d(!0);try{await n(o)}finally{d(!1)}};return(0,a.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Medication Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:o.name,onChange:e=>c({...o,name:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Lisinopril"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Dosage"}),(0,a.jsx)("input",{type:"text",value:o.dosage,onChange:e=>c({...o,dosage:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. 10mg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Frequency"}),(0,a.jsx)("input",{type:"text",value:o.frequency,onChange:e=>c({...o,frequency:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Daily"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Source Clinical Note (Optional)"}),(0,a.jsxs)("select",{value:o.source_note_id,onChange:e=>c({...o,source_note_id:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"",children:"-- None --"}),s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[new Date(e.created_at).toLocaleDateString()," - ",e.title]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:o.status,onChange:e=>c({...o,status:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"Active",children:"Active"}),(0,a.jsx)("option",{value:"Discontinued",children:"Discontinued"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:o.start_date,onChange:e=>c({...o,start_date:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:o.end_date,onChange:e=>c({...o,end_date:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:i,disabled:r,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 disabled:opacity-50",children:r?"Saving...":"Save Medication"})]})]})}function u(e){let{initialData:t,notes:s=[],admissions:n=[],onSubmit:i,onCancel:r}=e,[d,o]=(0,l.useState)(!1),[c,x]=(0,l.useState)({name:(null==t?void 0:t.name)||"",code:(null==t?void 0:t.code)||"",date:(null==t?void 0:t.date)?new Date(t.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],notes:(null==t?void 0:t.notes)||"",source_note_id:(null==t?void 0:t.source_note_id)||"",admission_id:(null==t?void 0:t.admission_id)||""}),u=async e=>{e.preventDefault(),o(!0);try{await i(c)}finally{o(!1)}};return(0,a.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Procedure Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:c.name,onChange:e=>x({...c,name:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Appendectomy"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"CPT/ICD Code"}),(0,a.jsx)("input",{type:"text",value:c.code,onChange:e=>x({...c,code:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. 44950"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",value:c.date,onChange:e=>x({...c,date:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Notes"}),(0,a.jsx)("textarea",{value:c.notes,onChange:e=>x({...c,notes:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none h-24 resize-none",placeholder:"Additional details..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Source Clinical Note (Optional)"}),(0,a.jsxs)("select",{value:c.source_note_id,onChange:e=>x({...c,source_note_id:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"",children:"-- None --"}),s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[new Date(e.created_at).toLocaleDateString()," - ",e.title]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Linked Admission (Optional)"}),(0,a.jsxs)("select",{value:c.admission_id,onChange:e=>x({...c,admission_id:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"",children:"-- None --"}),n.map(e=>(0,a.jsxs)("option",{value:e.id,children:[new Date(e.admission_date).toLocaleDateString()," - ",e.reason]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:r,disabled:d,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 disabled:opacity-50",children:d?"Saving...":"Save Procedure"})]})]})}function m(e){let{initialData:t,onSubmit:s,onCancel:n}=e,[i,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)(null),[c,x]=(0,l.useState)({title:(null==t?void 0:t.title)||"",file_type:(null==t?void 0:t.file_type)||"PDF",file_url:(null==t?void 0:t.file_url)||"",summary:(null==t?void 0:t.summary)||""}),u=async e=>{e.preventDefault(),r(!0);try{await s({...c,file:d})}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Document Title"}),(0,a.jsx)("input",{type:"text",required:!0,value:c.title,onChange:e=>x({...c,title:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Lab Results"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"File Type"}),(0,a.jsxs)("select",{value:c.file_type,onChange:e=>x({...c,file_type:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"PDF",children:"PDF"}),(0,a.jsx)("option",{value:"Image",children:"Image"}),(0,a.jsx)("option",{value:"Text",children:"Text"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"File URL (or Upload below)"}),(0,a.jsx)("input",{type:"url",value:c.file_url,onChange:e=>x({...c,file_url:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"https://..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"AI Summary (Optional)"}),(0,a.jsx)("textarea",{value:c.summary,onChange:e=>x({...c,summary:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none h-24 resize-none",placeholder:"Brief summary of the document content..."})]}),!t&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Upload File"}),(0,a.jsx)("input",{type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&(o(e.target.files[0]),c.title||x(t=>({...t,title:e.target.files[0].name})))},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 disabled:opacity-50",children:i?"Saving...":"Save Document"})]})]})}function p(e){let{initialData:t,onSubmit:s,onCancel:n}=e,[i,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)({description:(null==t?void 0:t.description)||"",due_date:(null==t?void 0:t.due_date)?new Date(t.due_date).toISOString().split("T")[0]:"",status:(null==t?void 0:t.status)||"Pending"}),c=async e=>{e.preventDefault(),r(!0);try{let e={...d};e.due_date||delete e.due_date,await s(e)}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Task Description"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.description,onChange:e=>o({...d,description:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Schedule follow-up"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Due Date"}),(0,a.jsx)("input",{type:"date",value:d.due_date,onChange:e=>o({...d,due_date:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:d.status,onChange:e=>o({...d,status:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 disabled:opacity-50",children:i?"Saving...":"Save Task"})]})]})}function h(e){let{initialData:t,onSubmit:s,onCancel:n}=e,[i,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)({item_name:(null==t?void 0:t.item_name)||"",code:(null==t?void 0:t.code)||"",cost:(null==t?void 0:t.cost)||0,status:(null==t?void 0:t.status)||"Pending"}),c=async e=>{e.preventDefault(),r(!0);try{await s(d)}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Item Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.item_name,onChange:e=>o({...d,item_name:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Consultation Fee"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Billing Code"}),(0,a.jsx)("input",{type:"text",value:d.code,onChange:e=>o({...d,code:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. 99213"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Cost ($)"}),(0,a.jsx)("input",{type:"number",step:"0.01",required:!0,value:d.cost,onChange:e=>o({...d,cost:parseFloat(e.target.value)}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:d.status,onChange:e=>o({...d,status:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"Billed",children:"Billed"}),(0,a.jsx)("option",{value:"Paid",children:"Paid"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 disabled:opacity-50",children:i?"Saving...":"Save Item"})]})]})}function g(e){let{initialData:t,onSubmit:s,onCancel:n}=e,[i,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)({allergen:(null==t?void 0:t.allergen)||"",reaction:(null==t?void 0:t.reaction)||"",severity:(null==t?void 0:t.severity)||"Mild"}),c=async e=>{e.preventDefault(),r(!0);try{await s(d)}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Allergen"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.allergen,onChange:e=>o({...d,allergen:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Penicillin"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Reaction"}),(0,a.jsx)("input",{type:"text",value:d.reaction,onChange:e=>o({...d,reaction:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Rash"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Severity"}),(0,a.jsxs)("select",{value:d.severity,onChange:e=>o({...d,severity:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"Mild",children:"Mild"}),(0,a.jsx)("option",{value:"Moderate",children:"Moderate"}),(0,a.jsx)("option",{value:"Severe",children:"Severe"}),(0,a.jsx)("option",{value:"Life Threatening",children:"Life Threatening"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 disabled:opacity-50",children:i?"Saving...":"Save Allergy"})]})]})}function b(e){let{initialData:t,onSubmit:s,onCancel:n}=e,[i,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)({admission_date:(null==t?void 0:t.admission_date)?new Date(t.admission_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],discharge_date:(null==t?void 0:t.discharge_date)?new Date(t.discharge_date).toISOString().split("T")[0]:"",reason:(null==t?void 0:t.reason)||"",status:(null==t?void 0:t.status)||"Admitted",notes:(null==t?void 0:t.notes)||""}),c=async e=>{e.preventDefault(),r(!0);try{await s(d)}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Admission Date"}),(0,a.jsx)("input",{type:"date",required:!0,value:d.admission_date,onChange:e=>o({...d,admission_date:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Discharge Date"}),(0,a.jsx)("input",{type:"date",value:d.discharge_date,onChange:e=>o({...d,discharge_date:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Reason for Admission"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.reason,onChange:e=>o({...d,reason:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:d.status,onChange:e=>o({...d,status:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"Admitted",children:"Admitted"}),(0,a.jsx)("option",{value:"Observation",children:"Observation"}),(0,a.jsx)("option",{value:"Discharged",children:"Discharged"}),(0,a.jsx)("option",{value:"Transferred",children:"Transferred"})]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Clinical Notes"}),(0,a.jsx)("textarea",{value:d.notes,onChange:e=>o({...d,notes:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none h-24 resize-none"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-8 py-2 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 disabled:opacity-50",children:i?"Processing...":"Record Admission"})]})]})}function f(e){let{initialData:t,onSubmit:s,onCancel:n}=e,[i,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)({condition_name:(null==t?void 0:t.condition_name)||"",diagnosis_date:(null==t?void 0:t.diagnosis_date)?new Date(t.diagnosis_date).toISOString().split("T")[0]:"",status:(null==t?void 0:t.status)||"Active",notes:(null==t?void 0:t.notes)||""}),c=async e=>{e.preventDefault(),r(!0);try{await s(d)}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Medical Condition"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.condition_name,onChange:e=>o({...d,condition_name:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"e.g. Hypertension, Type 2 Diabetes"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Diagnosis Date"}),(0,a.jsx)("input",{type:"date",value:d.diagnosis_date,onChange:e=>o({...d,diagnosis_date:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:d.status,onChange:e=>o({...d,status:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"Active",children:"Active"}),(0,a.jsx)("option",{value:"Resolved",children:"Resolved"}),(0,a.jsx)("option",{value:"Chronic",children:"Chronic"}),(0,a.jsx)("option",{value:"Intermittent",children:"Intermittent"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Notes"}),(0,a.jsx)("textarea",{value:d.notes,onChange:e=>o({...d,notes:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none h-24 resize-none"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-slate-600 font-bold",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-8 py-2 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition-all disabled:opacity-50",children:i?"Saving...":"Record Condition"})]})]})}var v=s(1270),j=s(4018),y=s(6127),N=s(8030);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let w=(0,N.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var k=s(2513),C=s(2022),_=s(933),S=s(2023);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let D=(0,N.Z)("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),A=(0,N.Z)("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),P=(0,N.Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),M=(0,N.Z)("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Z=(0,N.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),T=(0,N.Z)("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);var z=s(518),R=s(6780);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let I=(0,N.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var L=s(500),F=s(883),O=s(1568);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let q=(0,N.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),B=(0,N.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function H(){var e,t,s,d,N;let{id:H}=(0,n.useParams)(),E=(0,n.useRouter)(),U=(0,n.useSearchParams)(),{user:V}=(0,v.a)(),{showToast:G}=(0,j.p)(),[$,J]=(0,l.useState)(null),[Y,W]=(0,l.useState)(U.get("tab")||"overview"),[X,K]=(0,l.useState)(!0),[Q,ee]=(0,l.useState)(!1),[et,es]=(0,l.useState)(null),[ea,el]=(0,l.useState)(!1),[en,ei]=(0,l.useState)(null),[er,ed]=(0,l.useState)(null),[eo,ec]=(0,l.useState)(!1),[ex,eu]=(0,l.useState)([]),[em,ep]=(0,l.useState)([]),[eh,eg]=(0,l.useState)([]),[eb,ef]=(0,l.useState)([]),[ev,ej]=(0,l.useState)([]),[ey,eN]=(0,l.useState)([]),[ew,ek]=(0,l.useState)([]),[eC,e_]=(0,l.useState)([]),[eS,eD]=(0,l.useState)(""),[eA,eP]=(0,l.useState)(""),[eM,eZ]=(0,l.useState)(null),[eT,ez]=(0,l.useState)(!1),[eR,eI]=(0,l.useState)([]),eL=(null==$?void 0:$.status)==="Closed"&&(null==V?void 0:V.role)!=="admin";(0,l.useEffect)(()=>{H&&eF()},[H]);let eF=async()=>{try{K(!0),es(null);let[e,t,s,a]=await Promise.all([r.yN.getById(H),r.yN.getTimeline(H),r.r.getHistory(H),r.yN.getTimeline(H)]);eI(a.data),J(e.data),eu(t.data),e_(s.data),e.data.medications&&ep(e.data.medications),e.data.procedures&&eg(e.data.procedures),e.data.documents&&ef(e.data.documents),e.data.tasks&&ej(e.data.tasks),e.data.billing_items&&eN(e.data.billing_items),e.data.admissions&&ek(e.data.admissions)}catch(s){var e,t;console.error(s),es((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to load patient data"),G("Error loading patient details","error")}finally{K(!1)}};(0,l.useEffect)(()=>{let e=U.get("tab");e&&e!==Y&&W(e)},[U]);let eO=e=>{W(e);let t=new URLSearchParams(U.toString());t.set("tab",e),E.push("/patients/".concat(H,"?").concat(t.toString()),{scroll:!1})};(0,l.useEffect)(()=>{H&&(async()=>{try{if(ee(!0),"timeline"===Y){let e=await r.yN.getTimeline(H);eI(e.data)}else if("medications"===Y&&0===em.length){let e=await r.r.getMedications(H);ep(e.data)}else if("procedures"===Y&&0===eh.length){let e=await r.r.getProcedures(H);eg(e.data)}else if("documents"===Y&&0===eb.length){let e=await r.r.getDocuments(H);ef(e.data)}else if("tasks"===Y&&0===ev.length){let e=await r.r.getTasks(H);ej(e.data)}else if("billing"===Y&&0===ey.length){let e=await r.r.getBilling(H);eN(e.data)}else if("admissions"===Y&&0===ew.length){let e=await r.r.getAdmissions(H);ek(e.data)}else if("report"===Y){ez(!0);let e=await r.yN.getReport(H);eZ(e.data),ez(!1)}}catch(e){console.error("Failed to fetch ".concat(Y," data"),e),G("Failed to load ".concat(Y),"error")}finally{ee(!1)}})()},[Y,H]);let eq=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(eL&&"patient"!==e){G("Case is closed. Records are read-only.","warning");return}ei(e),ed(t),el(!0)},eB=()=>{el(!1),ed(null),ei(null)},eH=async e=>{if(!eo)try{if(ec(!0),"patient"===en){let t=await r.yN.update(H,e);J(t.data),G("Patient record updated","success")}else if("medication"===en){er?(await r.r.updateMedication(er.id,e),G("Medication updated","success")):(await r.r.addMedication(H,e),G("Medication added","success"));let t=await r.r.getMedications(H);ep(t.data)}else if("procedure"===en){er?(await r.r.updateProcedure(er.id,e),G("Procedure updated","success")):(await r.r.addProcedure(H,e),G("Procedure added","success"));let t=await r.r.getProcedures(H);eg(t.data)}else if("document"===en){if(er)await r.r.updateDocument(er.id,e),G("Document updated","success");else{if(e.file){let t=new FormData;t.append("file",e.file),t.append("title",e.title),e.summary&&t.append("summary",e.summary),await r.r.uploadDocument(H,t)}else await r.r.addDocument(H,e);G("Document uploaded","success")}let t=await r.r.getDocuments(H);ef(t.data)}else if("task"===en){er?(await r.r.updateTask(er.id,e),G("Task updated","success")):(await r.r.addTask(H,e),G("Task assigned","success"));let t=await r.r.getTasks(H);ej(t.data)}else if("billing"===en){er?(await r.r.updateBilling(er.id,e),G("Billing item updated","success")):(await r.r.addBilling(H,e),G("Billing item added","success"));let t=await r.r.getBilling(H);eN(t.data);let s=await r.yN.getById(H);J(s.data)}else if("allergy"===en){er?(await r.r.updateAllergy(er.id,e),G("Allergy updated","success")):(await r.r.addAllergy(H,e),G("Allergy recorded","success"));let t=await r.yN.getById(H);J(t.data)}else if("admission"===en){er?(await r.r.updateAdmission(er.id,e),G("Admission record updated","success")):(await r.r.addAdmission(H,e),G("Admission recorded","success"));let t=await r.r.getAdmissions(H);ek(t.data)}else if("history"===en){er?(await r.r.updateHistory(er.id,e),G("Condition updated","success")):(await r.r.addHistory(H,e),G("Condition recorded","success"));let t=await r.r.getHistory(H);e_(t.data)}let t=await r.yN.getTimeline(H);eI(t.data)}catch(e){var t,s;console.error("Failed to submit form",e),G((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Action failed","error")}finally{ec(!1),eB()}},eE=async(e,t)=>{if(eL){G("Cannot delete records in a closed case.","error");return}if(confirm("Are you sure you want to delete this ".concat(e,"?")))try{"medication"===e?(await r.r.deleteMedication(t),ep(em.filter(e=>e.id!==t))):"procedure"===e?(await r.r.deleteProcedure(t),eg(eh.filter(e=>e.id!==t))):"document"===e?(await r.r.deleteDocument(t),ef(eb.filter(e=>e.id!==t))):"task"===e?(await r.r.deleteTask(t),ej(ev.filter(e=>e.id!==t))):"billing"===e?(await r.r.deleteBilling(t),eN(ey.filter(e=>e.id!==t))):"allergy"===e?(await r.r.deleteAllergy(t),J({...$,allergies:$.allergies.filter(e=>e.id!==t)})):"history"===e?(await r.r.deleteHistory(t),e_(eC.filter(e=>e.id!==t))):"admission"===e&&(await r.r.deleteAdmission(t),ek(ew.filter(e=>e.id!==t)));let s=await r.yN.getById(H);J(s.data),G("Record deleted","success")}catch(e){var s,a;console.error("Failed to delete",e),G((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.detail)||"Delete failed","error")}},eU=async()=>{try{G("Generating PDF report...","info");let e=await r.yN.downloadReportPdf(H),t=new Blob([e.data],{type:"application/pdf"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.setAttribute("download","patient_report_".concat((null==$?void 0:$.mrn)||H,".pdf")),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(s),G("Report downloaded successfully","success")}catch(e){console.error("PDF download failed",e),G("Failed to download PDF report","error")}};if(X)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 gap-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-slate-200 border-t-teal-600"})}),(0,a.jsx)("p",{className:"text-slate-500 font-bold animate-pulse uppercase tracking-[0.2em] text-[10px]",children:"Retrieving Clinical Records..."})]});if(et)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 gap-6 px-8 text-center max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-50 text-red-600 rounded-full flex items-center justify-center shadow-sm",children:(0,a.jsx)(y.Z,{size:32})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"System Error"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm leading-relaxed",children:et})]}),(0,a.jsxs)("button",{onClick:()=>eF(),className:"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition shadow-lg",children:[(0,a.jsx)(w,{size:18})," Retry Connection"]})]});if(!$)return null;let eV=e=>{let{icon:t,title:s,description:l,actionText:n,onAction:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-3xl border border-dashed border-slate-200",children:[(0,a.jsx)("div",{className:"bg-slate-50 w-16 h-16 rounded-full flex items-center justify-center mb-4 border border-slate-100 shadow-inner",children:(0,a.jsx)(t,{className:"text-slate-300",size:32})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:s}),(0,a.jsx)("p",{className:"text-slate-500 text-sm max-w-xs mx-auto text-center mt-2 leading-relaxed",children:l}),n&&(0,a.jsxs)("button",{onClick:i,className:"mt-6 flex items-center gap-2 text-teal-600 font-bold hover:text-teal-700 transition-colors",children:[(0,a.jsx)(k.Z,{size:18})," ",n]})]})},eG=[{id:"overview",label:"Overview",icon:C.Z},{id:"timeline",label:"Timeline",icon:_.Z},{id:"notes",label:"Notes",icon:S.Z},{id:"medications",label:"Medications",icon:D},{id:"procedures",label:"Procedures",icon:A},{id:"documents",label:"Documents",icon:P},{id:"tasks",label:"Tasks",icon:M},{id:"billing",label:"Billing",icon:Z},{id:"admissions",label:"Admissions",icon:_.Z},{id:"report",label:"Final Report",icon:T}];return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[(0,a.jsxs)("nav",{className:"bg-white border-b border-slate-200 px-8 py-4 flex items-center gap-6 sticky top-0 z-20 shadow-sm",children:[(0,a.jsx)(i.default,{href:"/patients",className:"text-slate-500 hover:text-teal-600 transition-colors",children:(0,a.jsx)(z.Z,{size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:$.name}),(0,a.jsxs)("div",{className:"flex gap-2 text-xs text-slate-500 uppercase tracking-widest mt-1",children:[(0,a.jsx)("span",{children:$.mrn}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:$.gender||"Unknown"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[new Date($.date_of_birth).getFullYear()>1900?new Date().getFullYear()-new Date($.date_of_birth).getFullYear():"N/A"," yo"]})]})]}),(0,a.jsx)("div",{className:"ml-auto flex gap-3",children:(0,a.jsx)(i.default,{href:"/notes/new?patientId=".concat($.id),className:"bg-teal-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-teal-700 transition-colors shadow-sm text-sm flex items-center gap-2",children:"+ New Clinical Note"})})]}),(0,a.jsxs)("main",{className:"flex-1 p-8 max-w-7xl mx-auto w-full",children:[(0,a.jsx)("div",{className:"flex overflow-x-auto gap-1 bg-white p-1 rounded-xl shadow-sm border border-slate-100 mb-8 sticky top-[88px] z-10 mx-auto w-fit",children:eG.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>eO(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ".concat(Y===e.id?"bg-teal-50 text-teal-700 shadow-sm ring-1 ring-teal-200":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"),children:[(0,a.jsx)(t,{size:16}),e.label]},e.id)})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-center",children:[(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Current Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("Active"===$.status?"bg-green-500 animate-pulse":"bg-slate-400")}),(0,a.jsx)("span",{className:"font-bold text-slate-900",children:$.status||"Active"}),(0,a.jsx)("button",{onClick:async()=>{let e="Active"===$.status?"Closed":"Active";confirm("Change case status to ".concat(e,"?"))&&(J((await r.yN.toggleStatus(H,e)).data),G("Case ".concat(e.toLowerCase()," successfully"),"success"))},className:"ml-auto text-[10px] font-bold text-teal-600 hover:underline",children:"Active"===$.status?"Close Case":"Reactivate"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100",children:[(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Active Problems"}),(0,a.jsx)("div",{className:"font-bold text-slate-900 truncate",children:eC.filter(e=>"Active"===e.status).length>0?eC.filter(e=>"Active"===e.status).map(e=>e.condition_name).join(", "):"None Documented"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100",children:[(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Active Medications"}),(0,a.jsx)("div",{className:"font-bold text-slate-900 truncate",children:em.filter(e=>"Active"===e.status).length>0?em.filter(e=>"Active"===e.status).map(e=>e.name).join(", "):"None Documented"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100",children:[(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1",children:"Primary Insurance"}),(0,a.jsx)("div",{className:"font-bold text-slate-900 truncate",children:$.insurance_provider||"Not Recorded"})]})]}),"Closed"===$.status&&(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-2xl mb-8 flex items-center gap-4 text-amber-800",children:[(0,a.jsx)(R.Z,{className:"shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-sm",children:"This case is CLOSED"}),(0,a.jsx)("p",{className:"text-xs opacity-80",children:"All records are currently read-only. Reactivate the case to make changes."})]})]}),(0,a.jsxs)("div",{className:"min-h-[500px]",children:["overview"===Y&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 col-span-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)(C.Z,{size:20,className:"text-teal-600"})," Demographics"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[$.updated_at&&(0,a.jsxs)("span",{className:"text-xs text-slate-400 font-medium",children:["Last updated: ",new Date($.updated_at).toLocaleString()]}),(0,a.jsx)("button",{onClick:()=>eq("patient",$),className:"text-slate-400 hover:text-teal-600 transition-colors",children:(0,a.jsx)(I,{size:16})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-y-6 gap-x-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Full Name"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:$.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"MRN (Identifier)"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium font-mono",children:$.mrn})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Date of Birth"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:new Date($.date_of_birth).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Gender"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:$.gender||"Not Recorded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Address"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:$.address||"Not Recorded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Primary Phone"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:$.phone_number||"Not Recorded"})]})]}),(0,a.jsxs)("div",{className:"mt-8 pt-8 border-t border-slate-100",children:[(0,a.jsxs)("h4",{className:"text-sm font-bold text-slate-900 mb-4 uppercase tracking-wider flex items-center gap-2",children:[(0,a.jsx)(L.Z,{size:16,className:"text-teal-600"})," Emergency Contact"]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Name"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:$.emergency_contact_name||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Relation"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:$.emergency_contact_relation||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Phone"}),(0,a.jsx)("div",{className:"text-slate-800 font-medium",children:$.emergency_contact_phone||"-"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-100 h-fit",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-50 text-red-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(y.Z,{size:20})}),(0,a.jsx)("h3",{className:"text-xl font-black text-slate-900",children:"Critical Alerts"})]}),(0,a.jsx)("button",{onClick:()=>eq("allergy"),className:"w-8 h-8 flex items-center justify-center bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition shadow-lg shadow-slate-900/10",children:(0,a.jsx)(k.Z,{size:16})})]}),$.allergies&&0!==$.allergies.length?(0,a.jsx)("ul",{className:"space-y-4",children:$.allergies.map((e,t)=>(0,a.jsxs)("li",{className:"bg-white p-4 rounded-2xl border border-slate-100 shadow-sm flex justify-between items-start group hover:border-red-200 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-1.5 h-10 rounded-full mt-1 ".concat("High"===e.severity?"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.4)]":"bg-orange-400 shadow-[0_0_8px_rgba(251,146,60,0.4)]")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-black text-slate-900 text-base",children:e.allergen}),(0,a.jsxs)("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mt-0.5",children:[e.severity," Severity • ",e.reaction]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>eq("allergy",e),className:"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",children:(0,a.jsx)(I,{size:14})}),(0,a.jsx)("button",{onClick:()=>eE("allergy",e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(F.Z,{size:14})})]})]},t))}):(0,a.jsx)("div",{className:"py-12 text-center bg-slate-50 rounded-2xl border border-dashed border-slate-200",children:(0,a.jsx)("p",{className:"text-slate-400 font-bold italic text-sm",children:"No clinical allergies documented."})})]}),(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-100 h-fit lg:col-span-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-black text-slate-900 flex items-center gap-3",children:[(0,a.jsx)(O.Z,{size:20,className:"text-blue-500"})," Past Medical History"]}),(0,a.jsxs)("button",{onClick:()=>eq("history"),className:"flex items-center gap-2 px-4 py-2 bg-slate-50 text-slate-600 font-bold rounded-xl hover:bg-slate-100 transition",children:[(0,a.jsx)(k.Z,{size:16})," Add Condition"]})]}),0===eC.length?(0,a.jsx)("div",{className:"py-8 text-center text-slate-400 font-medium italic",children:"No historical medical conditions recorded."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:eC.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 bg-slate-50/50 rounded-2xl border border-slate-100 hover:border-blue-200 transition-colors group relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-black text-slate-900",children:e.condition_name}),(0,a.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:e.diagnosis_date?"Diagnosed: ".concat(new Date(e.diagnosis_date).toLocaleDateString()):"Date Unknown"})]}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-black uppercase ".concat("Active"===e.status?"bg-orange-50 text-orange-600":"bg-slate-100 text-slate-500"),children:e.status})]}),(0,a.jsxs)("div",{className:"flex gap-1 absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 p-1 rounded-lg",children:[(0,a.jsx)("button",{onClick:()=>eq("history",e),className:"p-1 text-slate-400 hover:text-teal-600",children:(0,a.jsx)(I,{size:14})}),(0,a.jsx)("button",{onClick:()=>eE("history",e.id),className:"p-1 text-slate-400 hover:text-red-600",children:(0,a.jsx)(F.Z,{size:14})})]})]},t))})]})]}),"notes"===Y&&(0,a.jsxs)("div",{className:"space-y-8 max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-3xl border border-slate-100 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-black text-slate-900",children:"Clinical Narrative"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 uppercase font-black tracking-[0.2em] mt-1",children:"Provider Documentation Timeline"})]}),(0,a.jsxs)("button",{onClick:()=>eq("note"),className:"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white font-black rounded-xl hover:bg-slate-800 shadow-xl shadow-slate-900/20 transition-all hover:-translate-y-0.5",children:[(0,a.jsx)(k.Z,{size:18})," Compose New Note"]})]}),0===ex.length?(0,a.jsx)(eV,{icon:S.Z,title:"A quiet timeline",description:"No clinical notes have been recorded for this patient yet.",actionText:"Create First Note",onAction:()=>eq("note")}):(0,a.jsx)("div",{className:"relative pl-12 border-l-4 border-slate-200/50 ml-6 space-y-8",children:ex.map(e=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-[41px] top-6 w-5 h-5 rounded-full bg-white border-4 border-teal-500"}),(0,a.jsx)(i.default,{href:"/notes/".concat(e.id),className:"block group",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-teal-700 bg-teal-50 px-2.5 py-1 rounded-md border border-teal-100",children:e.note_type}),e.structured_content&&(0,a.jsxs)("span",{className:"text-[10px] font-bold uppercase tracking-wider text-indigo-600 bg-indigo-50 px-2 py-1 rounded border border-indigo-100 flex items-center gap-1",children:[(0,a.jsx)(_.Z,{size:10})," AI Structured"]})]}),(0,a.jsx)("span",{className:"text-xs text-slate-400 font-medium",children:new Date(e.created_at).toLocaleString()})]}),(0,a.jsx)("h4",{className:"text-lg font-bold text-slate-900 group-hover:text-teal-600 transition-colors mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-slate-500 text-sm line-clamp-3 leading-relaxed",children:e.raw_content})]})})]},e.id))})]}),"medications"===Y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Current Medications"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest mt-1",children:"Pharmacological History"})]}),(0,a.jsxs)("button",{onClick:()=>eq("medication"),className:"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 shadow-lg shadow-slate-900/20 transition-all hover:-translate-y-0.5",children:[(0,a.jsx)(k.Z,{size:18})," New Prescription"]})]}),0===em.length?(0,a.jsx)(eV,{icon:D,title:"No medications found",description:"There are no active or past medications recorded for this patient.",actionText:"Add Medication",onAction:()=>eq("medication")}):(0,a.jsx)("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 uppercase font-black text-[10px] tracking-wider",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-8 py-5",children:"Medication"}),(0,a.jsx)("th",{className:"px-6 py-5",children:"Dosage"}),(0,a.jsx)("th",{className:"px-6 py-5",children:"Frequency"}),(0,a.jsx)("th",{className:"px-6 py-5",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-5 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:em.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[(0,a.jsx)("td",{className:"px-8 py-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-teal-50 rounded-xl flex items-center justify-center text-teal-600 border border-teal-100",children:(0,a.jsx)(D,{size:18})}),(0,a.jsx)("div",{className:"font-black text-slate-900 text-base",children:e.name})]})}),(0,a.jsx)("td",{className:"px-6 py-5 font-bold text-slate-700",children:e.dosage||"-"}),(0,a.jsx)("td",{className:"px-6 py-5 text-slate-600",children:e.frequency||"-"}),(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ".concat("Active"===e.status?"bg-green-100 text-green-700 border border-green-200":"bg-slate-100 text-slate-500 border border-slate-200"),children:e.status})}),(0,a.jsx)("td",{className:"px-8 py-5 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>eq("medication",e),className:"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",children:(0,a.jsx)(I,{size:16})}),(0,a.jsx)("button",{onClick:()=>eE("medication",e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(F.Z,{size:16})})]})})]},t))})]})})]}),"procedures"===Y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Surgical & Clinical Procedures"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest mt-1",children:"Intervention History"})]}),(0,a.jsxs)("button",{onClick:()=>eq("procedure"),className:"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 shadow-lg shadow-slate-900/20 transition-all hover:-translate-y-0.5",children:[(0,a.jsx)(k.Z,{size:18})," Record Procedure"]})]}),0===eh.length?(0,a.jsx)(eV,{icon:A,title:"No procedures recorded",description:"No surgical or diagnostic procedures have been logged for this patient.",actionText:"Add Procedure",onAction:()=>eq("procedure")}):(0,a.jsx)("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 uppercase font-black text-[10px] tracking-wider",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-8 py-5",children:"Procedure"}),(0,a.jsx)("th",{className:"px-6 py-5",children:"Code"}),(0,a.jsx)("th",{className:"px-6 py-5",children:"Date"}),(0,a.jsx)("th",{className:"px-8 py-5 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:eh.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[(0,a.jsx)("td",{className:"px-8 py-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 border border-indigo-100",children:(0,a.jsx)(A,{size:18})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-black text-slate-900 text-base",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-slate-500 font-medium max-w-xs truncate",children:e.notes})]})]})}),(0,a.jsx)("td",{className:"px-6 py-5",children:(0,a.jsx)("span",{className:"font-mono text-[10px] font-black bg-slate-100 px-2 py-1 rounded text-slate-600 border border-slate-200",children:e.code||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-5 font-bold text-slate-600",children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-8 py-5 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>eq("procedure",e),className:"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",children:(0,a.jsx)(I,{size:16})}),(0,a.jsx)("button",{onClick:()=>eE("procedure",e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(F.Z,{size:16})})]})})]},t))})]})})]}),"documents"===Y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Patient Documentation"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest mt-1",children:"Uploaded Files & Diagnostic Reports"})]}),(0,a.jsxs)("button",{onClick:()=>eq("document"),className:"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 shadow-lg shadow-slate-900/20 transition-all hover:-translate-y-0.5",children:[(0,a.jsx)(k.Z,{size:18})," Upload New File"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===eb.length?(0,a.jsx)("div",{className:"col-span-full",children:(0,a.jsx)(eV,{icon:P,title:"Vault is empty",description:"No external documents or scans have been uploaded for this patient yet.",actionText:"Upload Document",onAction:()=>eq("document")})}):eb.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 hover:shadow-xl transition-all group relative border-t-4 border-t-teal-500",children:[(0,a.jsxs)("div",{className:"absolute top-6 right-6 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>eq("document",e),className:"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",children:(0,a.jsx)(I,{size:16})}),(0,a.jsx)("button",{onClick:()=>eE("document",e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(F.Z,{size:16})})]}),(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-teal-50 text-teal-600 rounded-2xl flex items-center justify-center mb-4",children:(0,a.jsx)(S.Z,{size:24})}),(0,a.jsx)("h4",{className:"font-black text-slate-900 text-lg line-clamp-1 mb-1",children:e.title}),(0,a.jsxs)("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:[e.file_type||"PDF Document"," • ",new Date(e.created_at).toLocaleDateString()]}),e.summary&&(0,a.jsx)("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 mb-6 flex-1",children:(0,a.jsxs)("p",{className:"text-slate-600 text-xs leading-relaxed line-clamp-3 italic",children:['"',e.summary,'"']})}),(0,a.jsx)("a",{href:e.file_url.startsWith("http")?e.file_url:"http://localhost:8000/api/v1".replace("/api/v1","")+e.file_url,target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold text-center text-sm hover:bg-slate-800 transition-colors shadow-lg shadow-slate-900/10",children:"View Document"})]})]},t))})]}),"tasks"===Y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl border border-slate-100 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Clinical Workflow Tasks"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest mt-1",children:"Care Coordination & Follow-ups"})]}),(0,a.jsxs)("button",{onClick:()=>eq("task"),className:"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 shadow-lg shadow-slate-900/20 transition-all hover:-translate-y-0.5",children:[(0,a.jsx)(k.Z,{size:18})," New Task"]})]}),0===ev.length?(0,a.jsx)(eV,{icon:M,title:"All tasks completed",description:"No pending care tasks or follow-ups for this patient.",actionText:"Create Task",onAction:()=>eq("task")}):(0,a.jsx)("div",{className:"space-y-4",children:ev.sort((e,t)=>"Completed"===e.status?1:-1).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex items-center gap-6 group hover:shadow-md transition-shadow",children:[(0,a.jsx)("div",{className:"w-1.5 h-12 rounded-full ".concat("Completed"===e.status?"bg-slate-200":"bg-teal-500 shadow-[0_0_12px_rgba(20,184,166,0.4)]")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-black ".concat("Completed"===e.status?"text-slate-400 line-through":"text-slate-900"),children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest px-2 py-0.5 rounded border ".concat("Completed"===e.status?"bg-slate-50 text-slate-400 border-slate-100":"bg-teal-50 text-teal-600 border-teal-100"),children:e.status}),(0,a.jsxs)("p",{className:"text-[11px] text-slate-400 font-bold uppercase tracking-tighter",children:["Due: ",e.due_date?new Date(e.due_date).toLocaleDateString():"Pending"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>eq("task",e),className:"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",children:(0,a.jsx)(I,{size:16})}),(0,a.jsx)("button",{onClick:()=>eE("task",e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(F.Z,{size:16})})]})]},t))})]}),"billing"===Y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 bg-white p-8 rounded-[2.5rem] shadow-xl border border-slate-100 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-teal-50/50 rounded-full -mr-32 -mt-32 blur-3xl -z-10"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-6",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Service Start"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-2xl focus-within:ring-2 focus-within:ring-teal-500 transition-all",children:[(0,a.jsx)(q,{size:18,className:"text-slate-400"}),(0,a.jsx)("input",{type:"date",value:eS,onChange:e=>eD(e.target.value),className:"bg-transparent border-none text-slate-700 font-bold outline-none text-sm"})]})]}),(0,a.jsx)("div",{className:"mt-6 font-black text-slate-300",children:"→"}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Service End"}),(0,a.jsx)("div",{className:"flex items-center gap-3 px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-2xl focus-within:ring-2 focus-within:ring-teal-500 transition-all",children:(0,a.jsx)("input",{type:"date",value:eA,onChange:e=>eP(e.target.value),className:"bg-transparent border-none text-slate-700 font-bold outline-none text-sm"})})]}),(eS||eA)&&(0,a.jsx)("button",{onClick:()=>{eD(""),eP("")},className:"mt-6 w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center text-slate-500 hover:bg-slate-200 transition-colors",children:(0,a.jsx)(w,{size:18})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-8 w-full lg:w-auto pt-6 lg:pt-0 border-t lg:border-t-0 border-slate-100",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mb-1",children:"Total Outstanding"}),(0,a.jsxs)("p",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:[(0,a.jsx)("span",{className:"text-teal-600 mr-1",children:"$"}),(null===(e=$.outstanding_billing_amount)||void 0===e?void 0:e.toLocaleString(void 0,{minimumFractionDigits:2}))||"0.00"]})]}),(0,a.jsxs)("button",{onClick:()=>eq("billing"),className:"flex items-center gap-2 px-8 py-4 bg-slate-900 text-white font-black rounded-2xl hover:bg-slate-800 shadow-2xl shadow-slate-900/20 transition-all hover:-translate-y-1 active:scale-95",children:[(0,a.jsx)(k.Z,{size:20})," Add Item"]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-slate-100 overflow-hidden mt-8",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50/50 text-slate-400 uppercase font-black text-[10px] tracking-widest",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-8 py-6",children:"Service Date"}),(0,a.jsx)("th",{className:"px-6 py-6",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-6",children:"Code"}),(0,a.jsx)("th",{className:"px-6 py-6 text-right",children:"Cost"}),(0,a.jsx)("th",{className:"px-8 py-6 text-center",children:"Status"}),(0,a.jsx)("th",{className:"px-8 py-6 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===ey.filter(e=>{let t=new Date(e.created_at).toISOString().split("T")[0];return(!eS||!(t<eS))&&(!eA||!(t>eA))}).length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:(null==V?void 0:V.role)==="doctor"?5:6,className:"px-8 py-20 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(Z,{className:"text-slate-200",size:48}),(0,a.jsx)("p",{className:"text-slate-400 font-bold italic",children:"No financial records matching your criteria."})]})})}):ey.filter(e=>{let t=new Date(e.created_at).toISOString().split("T")[0];return(!eS||!(t<eS))&&(!eA||!(t>eA))}).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[(0,a.jsx)("td",{className:"px-8 py-6 text-slate-500 font-bold whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,a.jsx)("td",{className:"px-6 py-6 font-black text-slate-900 text-lg",children:e.item_name}),(0,a.jsx)("td",{className:"px-6 py-6",children:(0,a.jsx)("span",{className:"font-mono text-[10px] font-black bg-slate-100 px-2 py-1 rounded text-slate-500 border border-slate-200",children:e.code||"-"})}),(0,a.jsxs)("td",{className:"px-6 py-6 text-right font-black text-slate-900 text-lg",children:["$",(e.cost||0).toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,a.jsx)("td",{className:"px-8 py-6 text-center",children:(0,a.jsx)("span",{className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ".concat("Paid"===e.status?"bg-green-100 text-green-700 shadow-sm border border-green-200":"Pending"===e.status?"bg-orange-100 text-orange-700 shadow-sm border border-orange-200":"bg-slate-100 text-slate-500 border border-slate-200"),children:e.status})}),(0,a.jsx)("td",{className:"px-8 py-6 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>eq("billing",e),className:"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",children:(0,a.jsx)(I,{size:16})}),(0,a.jsx)("button",{onClick:()=>eE("billing",e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(F.Z,{size:16})})]})})]},t))})]})})]}),"admissions"===Y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-8 rounded-3xl shadow-sm border border-slate-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-black text-slate-900",children:"Hospital Stays"}),(0,a.jsx)("p",{className:"text-slate-500 font-medium tracking-tight",children:"Timeline of inpatient and observational admissions."})]}),(0,a.jsxs)("button",{onClick:()=>eq("admission"),className:"px-6 py-3 bg-slate-900 text-white font-black rounded-2xl hover:bg-slate-800 transition-all flex items-center gap-2",children:[(0,a.jsx)(k.Z,{size:20})," Record Stay"]})]}),0===ew.length?(0,a.jsx)(eV,{icon:_.Z,title:"No hospitalizations recorded",description:"This patient has no historical or active inpatient admissions in the system.",actionText:"Record Admission",onAction:()=>eq("admission")}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6",children:ew.sort((e,t)=>new Date(t.admission_date).getTime()-new Date(e.admission_date).getTime()).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm hover:shadow-md transition-all group",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center font-black text-xl",children:new Date(e.admission_date).getDate()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xl font-black text-slate-900",children:e.reason}),(0,a.jsxs)("p",{className:"text-slate-500 font-bold text-sm",children:[new Date(e.admission_date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),e.discharge_date?" — ".concat(new Date(e.discharge_date).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})):" (Current)"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest ".concat("Discharged"===e.status?"bg-green-50 text-green-700 border border-green-100":"bg-blue-50 text-blue-700 border border-blue-100 shadow-[0_0_12px_rgba(59,130,246,0.2)]"),children:e.status}),(0,a.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-4",children:[(0,a.jsx)("button",{onClick:()=>eq("admission",e),className:"p-2 text-slate-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors",children:(0,a.jsx)(I,{size:16})}),(0,a.jsx)("button",{onClick:()=>eE("admission",e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(F.Z,{size:16})})]})]})]}),e.notes&&(0,a.jsxs)("div",{className:"pl-6 border-l-4 border-slate-50 p-4 bg-slate-50/50 rounded-2xl text-slate-600 text-sm leading-relaxed whitespace-pre-wrap italic",children:['"',e.notes,'"']})]},t))})]}),"report"===Y&&(0,a.jsxs)("div",{className:"space-y-8 max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-white p-8 rounded-3xl border border-slate-100 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-black text-slate-900",children:"Final Patient Summary"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-[0.2em] mt-2",children:"Aggregated Clinical Documentation Report"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("button",{onClick:()=>eO("report"),className:"flex items-center gap-2 px-6 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-all",children:[(0,a.jsx)(w,{size:18})," Refresh"]}),(0,a.jsxs)("button",{onClick:eU,className:"flex items-center gap-2 px-6 py-3 bg-teal-600 text-white font-black rounded-xl hover:bg-teal-700 shadow-xl shadow-teal-600/20 transition-all hover:-translate-y-0.5",children:[(0,a.jsx)(B,{size:18})," Download PDF Report"]})]})]}),eT?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-40 gap-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-slate-200 border-t-teal-600"}),(0,a.jsx)("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px]",children:"Assembling Report Data..."})]}):eM&&(0,a.jsxs)("div",{className:"space-y-10 bg-white p-12 rounded-[3rem] shadow-2xl border border-slate-100 min-h-screen relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start border-b-2 border-slate-50 pb-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-teal-600 font-black text-2xl tracking-tighter mb-1",children:"CLINICAL DOC"}),(0,a.jsx)("div",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-400",children:"Documentation Assistant"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-bold text-slate-900",children:"Internal Medical Record"}),(0,a.jsxs)("div",{className:"text-xs text-slate-400 font-medium",children:["Ref: ",$.mrn]}),(0,a.jsxs)("div",{className:"text-xs text-slate-400 font-medium",children:["Generated: ",new Date(eM.generated_at).toLocaleString()]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-teal-600 mb-6 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-teal-500"})," Patient Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider block mb-1",children:"Full Name"}),(0,a.jsx)("div",{className:"text-slate-900 font-bold",children:$.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider block mb-1",children:"Date of Birth"}),(0,a.jsx)("div",{className:"text-slate-900 font-bold",children:new Date($.date_of_birth).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider block mb-1",children:"Gender"}),(0,a.jsx)("div",{className:"text-slate-900 font-bold",children:$.gender||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider block mb-1",children:"MRN"}),(0,a.jsx)("div",{className:"text-slate-900 font-bold font-mono",children:$.mrn})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-12",children:[(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-orange-600 mb-6 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500"})," Allergies & Severity"]}),(0,a.jsx)("div",{className:"space-y-3",children:(null===(t=$.allergies)||void 0===t?void 0:t.length)>0?$.allergies.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-xl border border-slate-100",children:[(0,a.jsx)("span",{className:"font-bold text-slate-800",children:e.allergen}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-orange-600 bg-orange-50 px-2 py-0.5 rounded-md",children:e.severity})]},t)):(0,a.jsx)("p",{className:"text-slate-400 italic text-sm",children:"No documented allergies."})})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-blue-600 mb-6 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})," Active Medications"]}),(0,a.jsx)("div",{className:"space-y-3",children:(null===(s=$.medications)||void 0===s?void 0:s.filter(e=>"Active"===e.status).length)>0?$.medications.filter(e=>"Active"===e.status).map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-slate-50 rounded-xl border border-slate-100",children:[(0,a.jsx)("div",{className:"font-bold text-slate-800",children:e.name}),(0,a.jsxs)("div",{className:"text-[10px] text-slate-500 font-bold uppercase mt-0.5",children:[e.dosage," • ",e.frequency]})]},t)):(0,a.jsx)("p",{className:"text-slate-400 italic text-sm",children:"No active medications."})})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-indigo-600 mb-6 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-500"})," Surgical & Procedure History"]}),(0,a.jsx)("div",{className:"bg-slate-50 rounded-[2rem] border border-slate-100 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-left text-xs",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-slate-100/50 text-slate-400 font-black uppercase tracking-widest",children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Procedure"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Clinical Notes"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:null===(d=$.procedures)||void 0===d?void 0:d.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-bold text-slate-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 text-slate-500",children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 text-slate-500 italic",children:e.notes||"-"})]},t))})]})})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-rose-600 mb-6 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-rose-500"})," Financial Summary"]}),(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsxs)("div",{className:"flex-1 bg-rose-50/50 p-6 rounded-3xl border border-rose-100",children:[(0,a.jsx)("div",{className:"text-[10px] font-black text-rose-400 uppercase tracking-widest mb-1",children:"Total Billed"}),(0,a.jsxs)("div",{className:"text-3xl font-black text-slate-900",children:["$",($.total_billing_amount||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex-1 bg-teal-50/50 p-6 rounded-3xl border border-teal-100",children:[(0,a.jsx)("div",{className:"text-[10px] font-black text-teal-400 uppercase tracking-widest mb-1",children:"Outstanding"}),(0,a.jsxs)("div",{className:"text-3xl font-black text-slate-900",children:["$",($.outstanding_billing_amount||0).toLocaleString()]})]})]})]}),(0,a.jsxs)("section",{className:"pb-20",children:[(0,a.jsxs)("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-slate-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-slate-900"})," Provider Documentation"]}),(0,a.jsx)("div",{className:"space-y-6",children:null===(N=eM.notes)||void 0===N?void 0:N.map((e,t)=>(0,a.jsxs)("div",{className:"pl-6 border-l-2 border-slate-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("div",{className:"font-bold text-slate-900",children:e.title}),(0,a.jsx)("div",{className:"text-[10px] text-slate-400 font-medium",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 leading-relaxed whitespace-pre-wrap line-clamp-4 italic",children:['"',e.raw_content,'"']})]},t))})]}),(0,a.jsxs)("div",{className:"absolute bottom-8 left-12 right-12 flex justify-between items-center text-[9px] font-black uppercase tracking-[0.2em] text-slate-300",children:[(0,a.jsx)("div",{children:"AI-Assisted Documentation System"}),(0,a.jsx)("div",{children:"Confidential Patient Record • NO MEDICAL ADVICE"}),(0,a.jsx)("div",{children:"Page 01 of 01"})]})]})]})]})]}),(0,a.jsxs)("footer",{className:"bg-slate-900 text-slate-400 py-6 text-center text-xs px-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2 text-amber-500 font-bold uppercase tracking-wider",children:[(0,a.jsx)(R.Z,{size:16}),(0,a.jsx)("span",{children:"Documentation Assistance Only"})]}),(0,a.jsxs)("p",{children:["This system uses AI to restructure clinical data. It does ",(0,a.jsx)("strong",{children:"NOT"})," provide medical advice, diagnosis, or treatment recommendations.",(0,a.jsx)("br",{}),"All generated content must be reviewed and verified by a licensed clinician before finalizing."]})]}),(0,a.jsxs)(o,{isOpen:ea,onClose:eB,title:"patient"===en?"Edit Patient Details":"medication"===en?er?"Edit Medication":"Add Medication":"procedure"===en?er?"Edit Procedure":"Add Procedure":"document"===en?er?"Edit Document":"Add Document":"task"===en?er?"Edit Task":"Add Task":"billing"===en?er?"Edit Billing Item":"Add Billing Item":"allergy"===en?er?"Edit Allergy":"Add Allergy":"admission"===en?er?"Update Stay Record":"Record Hospital Stay":"history"===en?er?"Edit Condition":"Record Medical Condition":"Action",children:["patient"===en&&(0,a.jsx)(c.Z,{initialData:er,onSubmit:eH,onCancel:eB}),"medication"===en&&(0,a.jsx)(x,{initialData:er,notes:ex,onSubmit:eH,onCancel:eB}),"procedure"===en&&(0,a.jsx)(u,{initialData:er,notes:ex,admissions:ew,onSubmit:eH,onCancel:eB}),"document"===en&&(0,a.jsx)(m,{initialData:er,onSubmit:eH,onCancel:eB}),"task"===en&&(0,a.jsx)(p,{initialData:er,onSubmit:eH,onCancel:eB}),"billing"===en&&(0,a.jsx)(h,{initialData:er,onSubmit:eH,onCancel:eB}),"allergy"===en&&(0,a.jsx)(g,{initialData:er,onSubmit:eH,onCancel:eB}),"admission"===en&&(0,a.jsx)(b,{initialData:er,onSubmit:eH,onCancel:eB}),"history"===en&&(0,a.jsx)(f,{initialData:er,onSubmit:eH,onCancel:eB})]})]})}},9764:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7437),l=s(2265);function n(e){let{initialData:t,onSubmit:s,onCancel:n}=e,[i,r]=(0,l.useState)(!1),[d,o]=(0,l.useState)({name:(null==t?void 0:t.name)||"",mrn:(null==t?void 0:t.mrn)||"",date_of_birth:(null==t?void 0:t.date_of_birth)?new Date(t.date_of_birth).toISOString().split("T")[0]:"",gender:(null==t?void 0:t.gender)||"",phone_number:(null==t?void 0:t.phone_number)||"",address:(null==t?void 0:t.address)||"",emergency_contact_name:(null==t?void 0:t.emergency_contact_name)||"",emergency_contact_relation:(null==t?void 0:t.emergency_contact_relation)||"",emergency_contact_phone:(null==t?void 0:t.emergency_contact_phone)||""}),c=async e=>{e.preventDefault(),r(!0);try{await s(d)}finally{r(!1)}};return(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Full Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.name,onChange:e=>o({...d,name:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"MRN"}),(0,a.jsx)("input",{type:"text",required:!0,value:d.mrn,onChange:e=>o({...d,mrn:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Date of Birth"}),(0,a.jsx)("input",{type:"date",required:!0,value:d.date_of_birth,onChange:e=>o({...d,date_of_birth:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Gender"}),(0,a.jsxs)("select",{value:d.gender,onChange:e=>o({...d,gender:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none",children:[(0,a.jsx)("option",{value:"",children:"Select..."}),(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:d.phone_number,onChange:e=>o({...d,phone_number:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Address"}),(0,a.jsx)("textarea",{value:d.address,onChange:e=>o({...d,address:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none h-20 resize-none"})]})]}),(0,a.jsxs)("div",{className:"border-t border-slate-100 my-6 pt-6",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-slate-900 mb-4 uppercase tracking-wider",children:"Emergency Contact"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Contact Name"}),(0,a.jsx)("input",{type:"text",value:d.emergency_contact_name,onChange:e=>o({...d,emergency_contact_name:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Relation"}),(0,a.jsx)("input",{type:"text",value:d.emergency_contact_relation,onChange:e=>o({...d,emergency_contact_relation:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Contact Phone"}),(0,a.jsx)("input",{type:"tel",value:d.emergency_contact_phone,onChange:e=>o({...d,emergency_contact_phone:e.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-50 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-50 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-teal-600 text-white font-bold rounded-lg hover:bg-teal-700 disabled:opacity-50",children:i?"Saving...":"Save Details"})]})]})}},4018:function(e,t,s){"use strict";s.d(t,{V:function(){return x},p:function(){return u}});var a=s(7437),l=s(2265),n=s(8030);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var r=s(6780);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,n.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var o=s(4697);let c=(0,l.createContext)(void 0);function x(e){let{children:t}=e,[s,n]=(0,l.useState)([]),x=(0,l.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),u=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=Math.random().toString(36).substring(2,9);n(a=>[...a,{id:s,message:e,type:t}]),setTimeout(()=>x(s),5e3)},[x]);return(0,a.jsxs)(c.Provider,{value:{showToast:u},children:[t,(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:s.map(e=>(0,a.jsxs)("div",{className:"pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border bg-white min-w-[300px] animate-in slide-in-from-right fade-in duration-300 ".concat("success"===e.type?"border-green-100":"error"===e.type?"border-red-100":"border-slate-100"),children:["success"===e.type&&(0,a.jsx)(i,{className:"text-green-500",size:20}),"error"===e.type&&(0,a.jsx)(r.Z,{className:"text-red-500",size:20}),"info"===e.type&&(0,a.jsx)(d,{className:"text-blue-500",size:20}),(0,a.jsx)("p",{className:"text-sm font-bold text-slate-800 flex-1",children:e.message}),(0,a.jsx)("button",{onClick:()=>x(e.id),className:"text-slate-400 hover:text-slate-600 p-1",children:(0,a.jsx)(o.Z,{size:16})})]},e.id))})]})}let u=()=>{let e=(0,l.useContext)(c);if(!e)throw Error("useToast must be used within ToastProvider");return e}},1270:function(e,t,s){"use strict";s.d(t,{H:function(){return d},a:function(){return o}});var a=s(7437),l=s(2265),n=s(6463),i=s(2800);let r=(0,l.createContext)(void 0);function d(e){let{children:t}=e,[s,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(null),[x,u]=(0,l.useState)(!0),m=(0,n.useRouter)();(0,n.usePathname)(),(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(e){c(e);try{let e=await i.iJ.getMe();d(e.data)}catch(e){console.error("Session restoration failed",e),localStorage.removeItem("token"),c(null)}}u(!1)})()},[]);let p=async e=>{localStorage.setItem("token",e),c(e);try{let e=await i.iJ.getMe();d(e.data),m.push("/dashboard")}catch(e){console.error("Failed to fetch user after login",e),m.push("/login")}};return(0,a.jsx)(r.Provider,{value:{user:s,token:o,login:p,logout:()=>{localStorage.removeItem("token"),c(null),d(null),m.push("/login")},isLoading:x},children:t})}let o=()=>{let e=(0,l.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2800:function(e,t,s){"use strict";s.d(t,{gr:function(){return l},iJ:function(){return r},r:function(){return i},yN:function(){return n}});let a=s(8472).Z.create({baseURL:"http://localhost:8000/api/v1"});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));let l={getAll:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keyword";return a.get("/notes/",{params:{search:e,mode:t}})},getById:e=>a.get("/notes/".concat(e)),create:e=>a.post("/notes/structure",e),generateSoap:e=>a.post("/notes/".concat(e,"/generate")),update:(e,t)=>a.put("/notes/".concat(e),t),delete:e=>a.delete("/notes/".concat(e)),getAudit:e=>a.get("/notes/".concat(e,"/audit")),getHistory:e=>a.get("/notes/".concat(e,"/history"))},n={getAll:e=>a.get("/patients/",{params:{search:e}}),getById:e=>a.get("/patients/".concat(e)),getTimeline:e=>a.get("/patients/".concat(e,"/timeline")),create:e=>a.post("/patients/",e),update:(e,t)=>a.patch("/patients/".concat(e),t),getReport:e=>a.get("/patients/".concat(e,"/report")),downloadReportPdf:e=>a.get("/patients/".concat(e,"/report/pdf"),{responseType:"blob"}),toggleStatus:(e,t)=>a.patch("/patients/".concat(e),{status:t})},i={getHistory:e=>a.get("/patients/".concat(e,"/history")),addHistory:(e,t)=>a.post("/patients/".concat(e,"/history"),t),updateHistory:(e,t)=>a.put("/patients/history/".concat(e),t),deleteHistory:e=>a.delete("/patients/history/".concat(e)),getMedications:e=>a.get("/patients/".concat(e,"/medications")),addMedication:(e,t)=>a.post("/patients/".concat(e,"/medications"),t),updateMedication:(e,t)=>a.put("/patients/medications/".concat(e),t),deleteMedication:e=>a.delete("/patients/medications/".concat(e)),addAllergy:(e,t)=>a.post("/patients/".concat(e,"/allergies"),t),updateAllergy:(e,t)=>a.put("/patients/allergies/".concat(e),t),deleteAllergy:e=>a.delete("/patients/allergies/".concat(e)),getAdmissions:e=>a.get("/patients/".concat(e,"/admissions")),addAdmission:(e,t)=>a.post("/patients/".concat(e,"/admissions"),t),updateAdmission:(e,t)=>a.put("/patients/admissions/".concat(e),t),deleteAdmission:e=>a.delete("/patients/admissions/".concat(e)),getProcedures:e=>a.get("/patients/".concat(e,"/procedures")),addProcedure:(e,t)=>a.post("/patients/".concat(e,"/procedures"),t),updateProcedure:(e,t)=>a.put("/patients/procedures/".concat(e),t),deleteProcedure:e=>a.delete("/patients/procedures/".concat(e)),getDocuments:e=>a.get("/patients/".concat(e,"/documents")),uploadDocument:(e,t)=>a.post("/patients/".concat(e,"/documents/upload"),t,{headers:{"Content-Type":"multipart/form-data"}}),addDocument:(e,t)=>a.post("/patients/".concat(e,"/documents"),t),updateDocument:(e,t)=>a.put("/patients/documents/".concat(e),t),deleteDocument:e=>a.delete("/patients/documents/".concat(e)),getTasks:e=>a.get("/patients/".concat(e,"/tasks")),addTask:(e,t)=>a.post("/patients/".concat(e,"/tasks"),t),updateTask:(e,t)=>a.put("/patients/tasks/".concat(e),t),deleteTask:e=>a.delete("/patients/tasks/".concat(e)),getBilling:e=>a.get("/patients/".concat(e,"/billing")),addBilling:(e,t)=>a.post("/patients/".concat(e,"/billing"),t),updateBilling:(e,t)=>a.put("/patients/billing/".concat(e),t),deleteBilling:e=>a.delete("/patients/billing/".concat(e))},r={login:e=>a.post("/auth/login",e),register:e=>a.post("/auth/register",e),getMe:()=>a.get("/auth/me")}}},function(e){e.O(0,[236,48,971,23,744],function(){return e(e.s=6685)}),_N_E=e.O()}]);